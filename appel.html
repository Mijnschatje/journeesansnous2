<!doctype html>
<html lang="fr">
<head>
  <link rel="stylesheet" href="assets/css/menu.css">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&display=swap" rel="stylesheet">
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Appel : Une JournÃ©e sans Nous â€” 18 dÃ©cembre 2025</title>
  <meta name="description" content="Appel Ã  la JournÃ©e Sans Nous â€” 18 dÃ©cembre : grÃ¨ve gÃ©nÃ©rale solidaire contre le racisme et pour l'Ã©galitÃ© des droits." />
  <link href="https://fonts.googleapis.com/css2?family=Manrope:wght@400;600;800&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" crossorigin="anonymous" />

  <style>
    :root{
      --brand:#ee4943; --brand-600:#d33e38;
      --ink:#0f172a; --muted:#475569;
      --line:#e5e7eb; --bg:#fafafa; --card:#fff;
      --accent:#b42727; --accent-2:#f0493a;
    }
    *{box-sizing:border-box;margin:0;padding:0}
    body{font:16px/1.65 'Manrope',sans-serif;color:var(--ink);background:var(--bg)}
    a{color:var(--brand);text-decoration:none}

    /* ===== HEADER + TICKER ===== */
    header{position:sticky;top:0;z-index:50;background:#fff;border-bottom:1px solid var(--line);box-shadow:0 1px 3px rgba(0,0,0,.05)}
    .wrap{max-width:1100px;margin:auto;padding:0 18px}
    .topbar{display:flex;justify-content:space-between;align-items:center;height:64px}
    .brand{font-weight:800;color:var(--brand);font-size:18px}
    .ticker{background:var(--brand);color:#fff;overflow:hidden;white-space:nowrap;font-weight:600;font-size:14px}
    .ticker .track{display:inline-block;animation:scroll 60s linear infinite;padding:8px 0}
    @keyframes scroll{0%{transform:translateX(0)}100%{transform:translateX(-50%)}}

    /* ===== HERO ===== */
    .hero{background:linear-gradient(135deg,#fff 0%,#fff5f4 50%,#ffe8e6 100%);padding:60px 0;border-bottom:1px solid var(--line);position:relative;overflow:hidden}
    .hero::before{content:'';position:absolute;top:-50%;right:-10%;width:500px;height:500px;background:radial-gradient(circle,rgba(238,73,67,.1),transparent);border-radius:50%}
    .hero h1{color:var(--brand);font-size:clamp(28px,3.2vw,42px);line-height:1.2;margin:0 0 12px;font-weight:800}

    /* Bloc contrÃ´les dans le hero */
    .hero-controls{
      display:flex;gap:12px;align-items:center;flex-wrap:wrap;
      background:#fff;border:1px solid var(--line);border-radius:12px;
      padding:12px 14px; box-shadow:0 2px 8px rgba(0,0,0,.06);
    }

    /* ===== SÃ‰LECTEUR DE LANGUE (rÃ©utilisÃ©) ===== */
    .language-select {
      flex: 1;
      min-width: 240px;
      padding: 10px 14px;
      font-size: 15px;
      font-family: 'Manrope', sans-serif;
      color: var(--ink);
      background: #fff;
      border: 2px solid var(--line);
      border-radius: 8px;
      cursor: pointer;
      transition: all 0.2s;
      appearance: none;
      background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' viewBox='0 0 12 12'%3E%3Cpath fill='%23ee4943' d='M6 9L1 4h10z'/%3E%3C/svg%3E");
      background-repeat: no-repeat;
      background-position: right 12px center;
      padding-right: 36px;
    }
    .language-select:hover { border-color: var(--brand); }
    .language-select:focus { outline: none; border-color: var(--brand); box-shadow: 0 0 0 3px rgba(238,73,67,.1); }

    /* ===== MINI PLAYER ===== */
    .mini-player {
      display: flex; align-items: center; gap: 10px;
      background: var(--card);
      border: 1px solid var(--line);
      border-radius: 12px;
      padding: 8px 10px;
      box-shadow: 0 2px 6px rgba(238,73,67,0.08);
    }
    .mini-player__btn {
      background: var(--brand);
      color: #fff; border: none; border-radius: 8px;
      padding: 8px 10px; cursor: pointer; transition: .2s;
      display:flex;align-items:center;justify-content:center;
    }
    .mini-player__btn:hover { background: var(--brand-600); transform: translateY(-1px); }
    .mini-player__btn i { font-size:14px }
    .mini-player__seek{ flex:1; min-width:140px; accent-color:var(--brand); cursor:pointer }
    .mini-player__time{ font-size:13px; color:var(--muted); min-width:42px; text-align:right; font-variant-numeric:tabular-nums }

    /* ===== CONTENU ===== */
    .container{max-width:1100px;margin:40px auto;padding:0 18px}
    .appel{background:var(--card);border:1px solid var(--line);border-radius:16px;padding:28px 22px}
    .appel.rtl { direction: rtl; text-align: right; }
    .appel p{margin:0 0 14px;line-height:1.7}
    .appel ul{margin:10px 0 0 1.2rem}
    .appel.rtl ul{margin:10px 1.2rem 0 0}
    .appel li{margin:10px 0}
    .appel strong{color:var(--accent)}
    .sep{height:1px;background:var(--line);margin:28px 0}

    .intro { background: #fff7f6; border-left: 4px solid var(--brand); padding: 20px; margin: 0 0 20px 0; border-radius: 8px; }
    .intro.rtl { border-left: none; border-right: 4px solid var(--brand); }
    .intro p { margin: 0 0 12px; }
    .intro p:last-child { margin: 0; }

    /* ===== BOUTONS FORMULAIRES ===== */
    .forms-grid{display:grid;grid-template-columns:1fr 1fr;gap:26px;margin-top:28px}
    .form-trigger{ background:var(--card);border:2px solid var(--brand);border-radius:16px; padding:24px; cursor:pointer; transition:.3s; text-align:center; box-shadow:0 4px 12px rgba(0,0,0,.04) }
    .form-trigger:hover{ box-shadow:0 8px 24px rgba(238,73,67,.25); transform:translateY(-2px); background:#fff7f6; }
    .form-trigger h3{font-size:22px;margin:0 0 8px;font-weight:800;color:var(--brand)}
    .form-trigger p{margin:0;color:var(--muted);font-size:15px}

    /* ===== FORMULAIRES ===== */
    .form-card{ background:var(--card);border:1px solid var(--line);border-radius:16px; padding:16px 16px 0; box-shadow:0 8px 24px rgba(0,0,0,.04); display:none; margin-top:20px; }
    .form-card.active{ display:block; }
    .form-card h3{font-size:20px;margin:6px 6px 8px;font-weight:800;color:#b42727}
    .form-card p{margin:0 6px 14px;color:var(--muted)}
    .form-frame{ width:100%; border:0; display:block; height:1200px; border-top:1px solid var(--line) }
    @media (min-width:900px){ .form-frame{height:1150px} }
    @media (max-width:680px){
      .forms-grid{grid-template-columns:1fr}
      .form-trigger h3{font-size:19px}
      .form-trigger p{font-size:14px}
      .hero-controls{flex-direction:column; align-items:stretch}
      .language-select{width:100%}
    }

    footer{background:#fdfdfd;border-top:1px solid #e5e7eb;color:#475569;padding:30px 18px;text-align:center;margin-top:50px}

    .share-button{ position:fixed;bottom:24px;right:24px;z-index:9999;background:#ee4943;color:#fff;border:none;border-radius:50px;padding:12px 20px;display:flex;align-items:center;gap:8px;font-size:14px;font-weight:700;cursor:pointer; box-shadow:0 4px 12px rgba(238,73,67,.4);transition:.3s }
    .share-button:hover{ transform:translateY(-2px);box-shadow:0 6px 20px rgba(238,73,67,.6);background:#d33e38 }
  </style>
</head>

<body>

<header>
  <nav class="topbar wrap">
    <a href="/" class="brand">JournÃ©e Sans Nous</a>
  </nav>
  <div class="ticker">
    <div class="track">
      âœŠ 18 DÃ‰CEMBRE 2025 â€¢ JOURNÃ‰E SANS NOUS : SI ON S'ARRÃŠTE, TOUT S'ARRÃŠTE !&nbsp;&nbsp;&nbsp;
      âœŠ 18 DÃ‰CEMBRE 2025 â€¢ JOURNÃ‰E SANS NOUS : SI ON S'ARRÃŠTE, TOUT S'ARRÃŠTE !&nbsp;&nbsp;&nbsp;
      âœŠ 18 DÃ‰CEMBRE 2025 â€¢ JOURNÃ‰E SANS NOUS : SI ON S'ARRÃŠTE, TOUT S'ARRÃŠTE !&nbsp;&nbsp;&nbsp;
    </div>
  </div>
</header>

<section class="hero">
  <div class="wrap">
    <h1>Appel : Une JournÃ©e sans Nous</h1>

    <!-- SÃ©lecteur de langue + mini player DANS LE HERO -->
    <div class="hero-controls">
      <select id="languageSelect" class="language-select" aria-label="Choisir une langue"></select>

      <div class="mini-player">
        <button id="audioPlayPause" class="mini-player__btn" aria-label="Lecture/Pause">
          <i class="fa-solid fa-play"></i>
        </button>
        <input id="audioSeek" class="mini-player__seek" type="range" min="0" value="0" step="1" aria-label="Position"/>
        <span id="audioTime" class="mini-player__time">0:00</span>
        <button id="audioMute" class="mini-player__btn" aria-label="Muet">
          <i class="fa-solid fa-volume-high"></i>
        </button>
      </div>
    </div>
  </div>
</section>

<main class="container">
  <article class="appel" id="content">
    <div id="contentText"></div>

    <div class="sep"></div>

    <div class="forms-grid">
      <div class="form-trigger" id="triggerCollectif">
        <h3>Je signe en tant que collectif</h3>
        <p>Ce formulaire est destinÃ© aux collectifs, syndicats, partis, assos, mediaâ€¦</p>
      </div>

      <div class="form-trigger" id="triggerIndividu">
        <h3>Je m'engage en tant que personne</h3>
        <p>Inscris-toi pour participer et recevoir les infos pratiques.</p>
      </div>
    </div>

    <div id="form-collectif" class="form-card">
      <h3>Formulaire pour collectifs</h3>
      <p>Ce formulaire est destinÃ© aux collectifs, syndicats, partis, assos, mediaâ€¦</p>
      <iframe class="form-frame"
        src="https://docs.google.com/forms/d/e/1FAIpQLScriLBz7nVHMUhRfLjAcr8MP5fTeQ90TCwpYTElVOc3w6tLXA/viewform?embedded=true"
        title="Formulaire collectifs"></iframe>
    </div>

    <div id="form-individu" class="form-card">
      <h3>Formulaire pour individuÂ·eÂ·s</h3>
      <p>Inscris-toi pour participer et recevoir les infos pratiques.</p>
      <iframe class="form-frame"
        src="https://docs.google.com/forms/d/e/1FAIpQLSdBeOVoAaU20fGz4nbFROA0FBGGbIeHgmZOO8J8f9TVXI-1LQ/viewform?embedded=true"
        title="Formulaire individus"></iframe>
    </div>
  </article>
</main>

<footer>
  <div>Â© JournÃ©e Sans Nous â€¢ Initiative de <a href="https://www.antiracisme-solidarite.org" target="_blank">Marche des SolidaritÃ©s</a> â€¢ 2025</div>
</footer>

<button id="shareButton" class="share-button">
  <i class="fa-solid fa-share-nodes"></i> Partager
</button>

<!-- Un seul player audio cachÃ© -->
<audio id="audioPlayer" preload="metadata" style="display:none"></audio>

<!-- Charge lâ€™objet translations -->
<script src="assets/js/translations.js?v=2"></script>

<script>
/* ====== Rendu textes + sÃ©lecteur depuis translations ====== */
(function(){
  // libellÃ©s (optionnel)
  const LABELS = {
    fr:"ðŸ‡«ðŸ‡· FranÃ§ais", en:"ðŸ‡¬ðŸ‡§ English", ar:"ðŸŒ Ø§Ù„Ø¹Ø±Ø¨ÙŠØ© (Arabe classique)",
    "ar-dz":"ðŸ‡©ðŸ‡¿ Ø§Ù„Ø¯Ø§Ø±Ø¬Ø© Ø§Ù„Ø¬Ø²Ø§Ø¦Ø±ÙŠØ©", kab:"ðŸ‡©ðŸ‡¿ Taqbaylit (Kabyle)",
    "ar-ma":"ðŸ‡²ðŸ‡¦ Ø§Ù„Ø¯Ø§Ø±Ø¬Ø© Ø§Ù„Ù…ØºØ±Ø¨ÙŠØ©", "ar-tn":"ðŸ‡¹ðŸ‡³ Ø§Ù„Ø¹Ø±Ø¨ÙŠØ© Ø§Ù„ØªÙˆÙ†Ø³ÙŠØ©",
    "tzm-latn":"âµ£ Tamazight (Latin)", "tzm-tfng":"âµ£ Tamazight (Tifinagh)"
  };

  const select = document.getElementById('languageSelect');
  const contentText = document.getElementById('contentText');
  const contentCard = document.getElementById('content');

  // Remplir le select
  const keys = Object.keys(translations);
  select.innerHTML = keys.map(k => `<option value="${k}">${LABELS[k] || k}</option>`).join('');

  function applyLang(lang) {
    const t = translations[lang] || translations.fr;
    document.documentElement.dir = t.rtl ? 'rtl' : 'ltr';
    contentCard.classList.toggle('rtl', !!t.rtl);
    contentText.innerHTML = t.content;
    // si la piste audio existe, on la prÃ©pare
    if (t.audio) audio.src = t.audio;
  }

  // Initial
  const defaultLang = keys.includes('fr') ? 'fr' : keys[0];
  select.value = defaultLang;
  applyLang(defaultLang);

  // Changement
  select.addEventListener('change', e => {
    applyLang(e.target.value);
    // Si on change de langue, on remet le player au dÃ©but
    audio.pause(); playBtn.innerHTML = '<i class="fa-solid fa-play"></i>';
    seek.value = 0; time.textContent = '0:00';
  });

  /* ====== Mini player ====== */
  const audio = document.getElementById('audioPlayer');
  const playBtn = document.getElementById('audioPlayPause');
  const seek = document.getElementById('audioSeek');
  const time = document.getElementById('audioTime');
  const mute = document.getElementById('audioMute');

  const fmt = s => { s=Math.floor(s||0); const m=Math.floor(s/60); const ss=(s%60).toString().padStart(2,'0'); return `${m}:${ss}`; };

  // Charger la piste de la langue initiale si dispo
  if (translations[defaultLang]?.audio) audio.src = translations[defaultLang].audio;

  playBtn.addEventListener('click', async () => {
    // Si pas de source, tenter assets/audio/audio-<clÃ©>.mp3 par convention
    if (!audio.src) {
      const k = select.value;
      audio.src = translations[k]?.audio || `assets/audio/audio-${k}.mp3`;
    }
    if (audio.paused) {
      try { await audio.play(); playBtn.innerHTML = '<i class="fa-solid fa-pause"></i>'; }
      catch(e){ console.warn(e); }
    } else {
      audio.pause(); playBtn.innerHTML = '<i class="fa-solid fa-play"></i>';
    }
  });

  mute.addEventListener('click', () => {
    audio.muted = !audio.muted;
    mute.innerHTML = audio.muted ? '<i class="fa-solid fa-volume-xmark"></i>' : '<i class="fa-solid fa-volume-high"></i>';
  });

  audio.addEventListener('loadedmetadata', () => { seek.max = Math.floor(audio.duration || 0); });
  audio.addEventListener('timeupdate', () => { seek.value = Math.floor(audio.currentTime || 0); time.textContent = fmt(audio.currentTime); });
  audio.addEventListener('ended', () => { playBtn.innerHTML = '<i class="fa-solid fa-play"></i>'; seek.value = 0; time.textContent = '0:00'; });
  seek.addEventListener('input', () => { audio.currentTime = +seek.value; });

  /* ====== Formulaires + partage (inchangÃ©) ====== */
  document.getElementById('triggerCollectif').addEventListener('click', () => toggleForm('collectif'));
  document.getElementById('triggerIndividu').addEventListener('click', () => toggleForm('individu'));
  document.getElementById('shareButton').addEventListener('click', shareContent);

  function toggleForm(type) {
    const c = document.getElementById('form-collectif');
    const i = document.getElementById('form-individu');
    if (type === 'collectif') {
      const on = c.classList.contains('active');
      c.classList.toggle('active'); i.classList.remove('active');
      if (!on) setTimeout(()=>c.scrollIntoView({behavior:'smooth',block:'start'}), 100);
    } else {
      const on = i.classList.contains('active');
      i.classList.toggle('active'); c.classList.remove('active');
      if (!on) setTimeout(()=>i.scrollIntoView({behavior:'smooth',block:'start'}), 100);
    }
  }

  function shareContent() {
    const t = "Appel â€” JournÃ©e Sans Nous (18 dÃ©cembre) : Â« Si on s'arrÃªte, tout s'arrÃªte ! Â»";
    const u = window.location.href;
    if (navigator.share) navigator.share({ title: 'Appel â€” JournÃ©e Sans Nous', text: t, url: u });
    else navigator.clipboard.writeText(`${t}\n${u}`).then(()=>alert('Lien copiÃ© âœ…'));
  }
})();
</script>

<script src="js/menu.js"></script>
</body>
</html>
